if(typeof(topcmm_flashchat_name)=="undefined"){var topcmm_flashchat_name="123flashchat.swf"}var topcmm_flashchat_swfurl=oTopcmmUtil.getWebPath()+topcmm_flashchat_name;if(typeof(topcmm_flashchat_init_host)=="undefined"){var topcmm_flashchat_init_host=""}if(typeof(topcmm_flashchat_init_port)=="undefined"){var topcmm_flashchat_init_port=""}if(typeof(topcmm_flashchat_init_host_s)=="undefined"){var topcmm_flashchat_init_host_s=""}if(typeof(topcmm_flashchat_init_port_s)=="undefined"){var topcmm_flashchat_init_port_s=""}if(typeof(topcmm_flashchat_init_host_h)=="undefined"){var topcmm_flashchat_init_host_h=""}if(typeof(topcmm_flashchat_init_port_h)=="undefined"){var topcmm_flashchat_init_port_h=""}if(typeof(topcmm_flashchat_init_group)=="undefined"){var topcmm_flashchat_init_group=""}if(typeof(topcmm_flashchat_init_room)=="undefined"){var topcmm_flashchat_init_room=""}if(typeof(init_user)=="undefined"){var init_user=""}if(typeof(init_password)=="undefined"){var init_password=""}if(typeof(topcmm_flashchat_default_show)=="undefined"||topcmm_flashchat_swfurl.length==0){var topcmm_flashchat_default_show=false}if(typeof(topcmm_flashchat_popup_mode)=="undefined"){var topcmm_flashchat_popup_mode=false}if(typeof(topcmm_flashchat_width)=="undefined"){var topcmm_flashchat_width=779}if(typeof(topcmm_flashchat_height)=="undefined"){var topcmm_flashchat_height=505}var sbFlashChatUrl=new oTopcmmUtil.StringBuffer();sbFlashChatUrl.append(topcmm_flashchat_swfurl);sbFlashChatUrl.append("?init_facebookbar=1");if(""!=topcmm_flashchat_init_host){sbFlashChatUrl.append("&init_host=");sbFlashChatUrl.append(topcmm_flashchat_init_host)}if(""!=topcmm_flashchat_init_port){sbFlashChatUrl.append("&init_port=");sbFlashChatUrl.append(topcmm_flashchat_init_port)}if(""!=topcmm_flashchat_init_host_s){sbFlashChatUrl.append("&init_host_s=");sbFlashChatUrl.append(topcmm_flashchat_init_host_s)}if(""!=topcmm_flashchat_init_port_s){sbFlashChatUrl.append("&init_port_s=");sbFlashChatUrl.append(topcmm_flashchat_init_port_s)}if(""!=topcmm_flashchat_init_host_h){sbFlashChatUrl.append("&init_host_h=");sbFlashChatUrl.append(topcmm_flashchat_init_host_h)}if(""!=topcmm_flashchat_init_port_h){sbFlashChatUrl.append("&init_port_h=");sbFlashChatUrl.append(topcmm_flashchat_init_port_h)}if(""!=topcmm_flashchat_init_group){sbFlashChatUrl.append("&init_group=");sbFlashChatUrl.append(topcmm_flashchat_init_group)}if(""!=topcmm_flashchat_init_room){sbFlashChatUrl.append("&init_room=");sbFlashChatUrl.append(topcmm_flashchat_init_room)}if(""!=init_user){sbFlashChatUrl.append("&init_user=");sbFlashChatUrl.append(init_user);sbFlashChatUrl.append("&init_password=");sbFlashChatUrl.append(init_password)}var CHAT_URL=sbFlashChatUrl.toString();var FLASH_OBJECT_CHAT=new topcmmSWFObject(CHAT_URL,"topcmm_123flashchat","100%","100%","8","#FFFFFF");var firstR1Tab=true;var flashchatHtml='<div id="presence_applications_tab_r1" class="presence_section presence_bar_button"><div class="inner_button"><img src="'+oTopcmmUtil.getRootImagePath()+'/room.gif" style="float: left; padding-right: 4px;" width="16px" height="16px;-moz-user-select:none;" /><span class="unselectable" onselectstart="return(false);" id="chat_count_tab">Chat</span><div class="titletip_r1" style="display: none;"><strong>Click to chat</strong></div></div></div><div class="presence_menu_opts_wrapper presence_menu_opts_wrapper_left_r1 hide4swf" id="presence_applications_r1"><div id="presence_menu_opts_r1" class="presence_menu_opts_hide_r1"><h2 class="fb_123flashchat_clearfix hide4swf"><div class="presence_minimize"></div></h2><div id="fb_123flashchat" class="presence_menu_content_wrapper"></div></div></div>';
function topcmm_123flashchat_intergrate(){$topcmm("#presence_bar_right").prepend(flashchatHtml);oFacebookFlashChatBar.addChat();toggleR1=1;if(!topcmm_flashchat_popup_mode&&topcmm_flashchat_default_show){oFacebookFlashChatBar.toggleR1Tab()}var $appMenu=$topcmm("#presence_applications_tab_r1");$appMenu.bind("click",function(){if(topcmm_flashchat_popup_mode){var command='window.open("'+topcmm_flashchat_swfname+'","facebookbar_123flashchat","width='+topcmm_flashchat_width+",height="+topcmm_flashchat_height+'")';eval(command)}else{oFacebookFlashChatBar.toggleR1Tab();$topcmm(".titletip_r1").hide()}});$appMenu.hover(function(){if($topcmm("#presence_applications_r1.hide4swf").length!=0){$topcmm(".titletip_r1").show()}},function(){if($topcmm("#presence_applications_r1.hide4swf").length!=0){$topcmm(".titletip_r1").hide()}});var $appHeader=$topcmm("#presence_applications_r1 h2");$appHeader.bind("click",function(){oFacebookFlashChatBar.toggleR1Tab()});$appMenu.add($appHeader)}function topcmm_123flashchat_onlineChatNum(a){oTopcmmUtil.writeConsole(oTopcmmUtil.getFunctionName(arguments));oFacebookFlashChatBar.updateChatNum(a)};
var oFacebookFlashChatBar={toggleR1Tab:function(){if(firstR1Tab){$topcmm("#presence_menu_opts_r1 h2").html("<span>Chat</span>");firstR1Tab=false}if(isNaN(toggleR1)){toggleR1=1}if((toggleR1++)%2==0){oFacebookFlashChatBar.hideR1()}else{oFacebookFlashChatBar.showR1()}oFacebookBar.hideAllChatTab();oFacebookBar.hideFriendTab();oFacebookBar.hideApplicationTab()},addChat:function(){FLASH_OBJECT_CHAT.addParam("quality","high");FLASH_OBJECT_CHAT.addParam("allowScriptAccess","always");FLASH_OBJECT_CHAT.write("fb_123flashchat")},hideR1:function(){toggleR1=1;$topcmm("#presence_applications_r1").addClass("hide4swf");$topcmm("#presence_menu_opts_r1").addClass("presence_menu_opts_hide_r1").css("width","1px");$topcmm("#presence_menu_opts_r1 > .fb_123flashchat_clearfix").addClass("hide4swf").hide();$topcmm("#freechat_123webmessenger").removeClass("presence_menu_content_wrapper").addClass("presence_menu_content_wrapper_hide");$topcmm("#r1_123webmessenger").css({width:0+"px",height:0+"px"});$topcmm("#presence_applications_tab_r1").removeClass("focused")},showR1:function(){toggleR1=0;$topcmm("#presence_applications_r1").removeClass("hide4swf");$topcmm("#presence_menu_opts_r1").removeClass("presence_menu_opts_hide_r1").addClass("presence_menu_opts_r1").css("width",topcmm_flashchat_width+"px");$topcmm("#presence_menu_opts_r1 > .fb_123flashchat_clearfix").removeClass("hide4swf").show();$topcmm("#freechat_123webmessenger").css("height",topcmm_flashchat_height+"px").removeClass("presence_menu_content_wrapper_hide").addClass("presence_menu_content_wrapper");$topcmm("#r1_123webmessenger").css({width:topcmm_flashchat_width+"px",height:topcmm_flashchat_height+"px"});$topcmm("#presence_applications_tab_r1").addClass("focused")},updateChatNum:function(b){var a=parseInt(b);if(a>0){$topcmm("#chat_count_tab").html("Chat ("+a+")")}else{$topcmm("#chat_count_tab").html("Chat")}}};
